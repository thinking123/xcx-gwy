<template>
  <CTransition
    :show="show"
    custom-class="c-overlay"
    :custom-style="cs"
    :duration="duration"
    bind:tap="onClick"
    catch:touchmove="noop"
  >
    <slot></slot>
  </CTransition>

</template>
<script>
  import wepy from '@wepy/core'

  wepy.component({
    data: {

    },
    externalClasses:[
      'external-cls'
    ],
    props: {
      show: Boolean,
      customStyle: String,
      duration: {
        type: null,
        default: 300
      },
      zIndex: {
        type: Number,
        default: 1
      }
    },
    computed:{
      cs(){
        const sty = `z-index: ${ this.zIndex }; ${ this.customStyle }`;
        return sty;
      }
    },
    methods: {
      onClick() {
        this.$emit('click');
      },

      // for prevent touchmove
      noop() {}
    },
    onLoad () {

    }
  });
</script>
<style lang="less">
  @import '~lessUI';

  .c-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: @overlay-background-color;
  }

</style>

<config>
  {
  usingComponents: {
  CTransition:'./CTransition',
  }
  }
</config>
